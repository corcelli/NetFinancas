{"filter":false,"title":"func_consultaAPI_e_joga_na_variavel.js","tooltip":"/funcoes/func_consultaAPI_e_joga_na_variavel.js","undoManager":{"mark":13,"position":13,"stack":[[{"start":{"row":0,"column":0},"end":{"row":54,"column":0},"action":"insert","lines":["const SaldoHistoricoJuno = require('../models/TB_SaldoHistoricoJuno');","const salvasaldo = require('../models/TB_SaldoHistoricoJuno');","const axios = require('axios');","const qs = require('querystring');","    //Toda a parte de geração do boleto via API usando o modulo AXIOS.","//configuração do header de envio.","","","","module.exports = {","  foo: function () {","","const config = {","  headers: {'Content-Type': 'application/x-www-form-urlencoded'},"," };","    const url = 'https://sandbox.boletobancario.com/boletofacil/integration/api/v1/fetch-balance';","    const requestBody = ({","    token: '66EFD10AD6ADA08CAC8BDCFEBA9ABF2CAAED5015536CC44D42B536831E3FA584',","   //responseType: 'JSON'","});","   axios.post(url, qs.stringify(requestBody), config)","  .then((response) => {","    //console.log(response.data);","    var valores_json = JSON.stringify(response.data.data);","    var valores_ok = JSON.parse(valores_json);","    //console.log(valores_ok.balance);","    //console.log(valores_ok.withheldBalance);","    //console.log(valores_ok.transferableBalance);","    //var balance = valores_ok.balance;","    //var transferableBalance = valores_ok.transferableBalance;","    //console.log((valores_ok.transferableBalance));","    //exports = valores;","    //console.log(valores_ok);","   salvasaldo.create({","            balance:   valores_ok.balance,","            transferableBalance: valores_ok.transferableBalance,","            withheldBalance:  valores_ok.withheldBalance","            });","             },","    (error) => {console.log(error);});","","  },","  ","  AtualizaSaldo: function() {","        SaldoHistoricoJuno.findAll({order: [['createdAt','DESC']],limit : 1}).then(function(saldo){","        //console.log(saldo.length);","        console.log(saldo[0].balance);","    });","    ","  }","","","    };","",""],"id":1}],[{"start":{"row":10,"column":17},"end":{"row":10,"column":18},"action":"insert","lines":["c"],"id":2},{"start":{"row":10,"column":18},"end":{"row":10,"column":19},"action":"insert","lines":["a"]},{"start":{"row":10,"column":19},"end":{"row":10,"column":20},"action":"insert","lines":["l"]},{"start":{"row":10,"column":20},"end":{"row":10,"column":21},"action":"insert","lines":["l"]}],[{"start":{"row":10,"column":17},"end":{"row":10,"column":21},"action":"remove","lines":["call"],"id":3},{"start":{"row":10,"column":17},"end":{"row":10,"column":25},"action":"insert","lines":["callback"]}],[{"start":{"row":33,"column":3},"end":{"row":37,"column":15},"action":"remove","lines":["salvasaldo.create({","            balance:   valores_ok.balance,","            transferableBalance: valores_ok.transferableBalance,","            withheldBalance:  valores_ok.withheldBalance","            });"],"id":4},{"start":{"row":33,"column":3},"end":{"row":34,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":37,"column":2},"end":{"row":43,"column":4},"action":"remove","lines":["","  AtualizaSaldo: function() {","        SaldoHistoricoJuno.findAll({order: [['createdAt','DESC']],limit : 1}).then(function(saldo){","        //console.log(saldo.length);","        console.log(saldo[0].balance);","    });","    "],"id":5}],[{"start":{"row":38,"column":2},"end":{"row":38,"column":3},"action":"remove","lines":["}"],"id":6}],[{"start":{"row":36,"column":3},"end":{"row":36,"column":4},"action":"remove","lines":[","],"id":9}],[{"start":{"row":21,"column":23},"end":{"row":22,"column":0},"action":"insert","lines":["",""],"id":10},{"start":{"row":22,"column":0},"end":{"row":22,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":22,"column":4},"end":{"row":22,"column":5},"action":"insert","lines":["c"],"id":11},{"start":{"row":22,"column":5},"end":{"row":22,"column":6},"action":"insert","lines":["a"]},{"start":{"row":22,"column":6},"end":{"row":22,"column":7},"action":"insert","lines":["l"]},{"start":{"row":22,"column":7},"end":{"row":22,"column":8},"action":"insert","lines":["l"]},{"start":{"row":22,"column":8},"end":{"row":22,"column":9},"action":"insert","lines":["b"]},{"start":{"row":22,"column":9},"end":{"row":22,"column":10},"action":"insert","lines":["a"]},{"start":{"row":22,"column":10},"end":{"row":22,"column":11},"action":"insert","lines":["c"]},{"start":{"row":22,"column":11},"end":{"row":22,"column":12},"action":"insert","lines":["k"]}],[{"start":{"row":22,"column":4},"end":{"row":22,"column":12},"action":"remove","lines":["callback"],"id":12},{"start":{"row":22,"column":4},"end":{"row":22,"column":12},"action":"insert","lines":["callback"]}],[{"start":{"row":22,"column":12},"end":{"row":22,"column":14},"action":"insert","lines":["()"],"id":13}],[{"start":{"row":22,"column":13},"end":{"row":22,"column":14},"action":"insert","lines":["r"],"id":14},{"start":{"row":22,"column":14},"end":{"row":22,"column":15},"action":"insert","lines":["e"]},{"start":{"row":22,"column":15},"end":{"row":22,"column":16},"action":"insert","lines":["s"]}],[{"start":{"row":22,"column":13},"end":{"row":22,"column":16},"action":"remove","lines":["res"],"id":15},{"start":{"row":22,"column":13},"end":{"row":22,"column":21},"action":"insert","lines":["response"]}],[{"start":{"row":22,"column":22},"end":{"row":22,"column":23},"action":"insert","lines":[";"],"id":16}]]},"ace":{"folds":[],"scrolltop":63.5,"scrollleft":0,"selection":{"start":{"row":27,"column":30},"end":{"row":27,"column":30},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":1,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1576712602770,"hash":"1a2b5c124f71e1ed85796a080771d99387fe5d00"}